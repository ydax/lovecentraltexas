bindings:
  # Cloud Functions service agent permissions
  - role: roles/cloudfunctions.admin
    members:
      - serviceAccount:lovecentraltexas@appspot.gserviceaccount.com

  # Cloud Build service account permissions
  - role: roles/firebase.admin
    members:
      - serviceAccount:956360338882@cloudbuild.gserviceaccount.com

  # Firestore permissions for Cloud Functions
  - role: roles/datastore.user
    members:
      - serviceAccount:lovecentraltexas@appspot.gserviceaccount.com

  # Cloud Run permissions (for Cloud Functions v2)
  - role: roles/run.admin
    members:
      - serviceAccount:lovecentraltexas@appspot.gserviceaccount.com
      - serviceAccount:956360338882@cloudbuild.gserviceaccount.com

  # Secret Manager permissions for Cloud Build
  # Note: Both the Cloud Build service account and Service Agent need access
  # The Service Agent (service-PROJECT_NUMBER@gcp-sa-cloudbuild) is required for secret injection
  - role: roles/secretmanager.secretAccessor
    members:
      - serviceAccount:956360338882@cloudbuild.gserviceaccount.com
      - serviceAccount:service-956360338882@gcp-sa-cloudbuild.iam.gserviceaccount.com
